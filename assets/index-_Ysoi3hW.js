function d(){}d.prototype={diff:function(n,o){var i,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=r.callback;typeof r=="function"&&(t=r,r={}),this.options=r;var u=this;function s(l){return t?(setTimeout(function(){t(void 0,l)},0),!0):l}n=this.castInput(n),o=this.castInput(o),n=this.removeEmpty(this.tokenize(n)),o=this.removeEmpty(this.tokenize(o));var f=o.length,v=n.length,c=1,p=f+v;r.maxEditLength&&(p=Math.min(p,r.maxEditLength));var y=(i=r.timeout)!==null&&i!==void 0?i:1/0,T=Date.now()+y,a=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(a[0],o,n,0);if(a[0].oldPos+1>=v&&m+1>=f)return s([{value:this.join(o),count:o.length}]);var x=-1/0,C=1/0;function $(){for(var l=Math.max(x,-c);l<=Math.min(C,c);l+=2){var h=void 0,L=a[l-1],w=a[l+1];L&&(a[l-1]=void 0);var E=!1;if(w){var O=w.oldPos-l;E=w&&0<=O&&O<f}var M=L&&L.oldPos+1<v;if(!E&&!M){a[l]=void 0;continue}if(!M||E&&L.oldPos+1<w.oldPos?h=u.addToPath(w,!0,void 0,0):h=u.addToPath(L,void 0,!0,1),m=u.extractCommon(h,o,n,l),h.oldPos+1>=v&&m+1>=f)return s(N(u,h.lastComponent,o,n,u.useLongestToken));a[l]=h,h.oldPos+1>=v&&(C=Math.min(C,l-1)),m+1>=f&&(x=Math.max(x,l+1))}c++}if(t)(function l(){setTimeout(function(){if(c>p||Date.now()>T)return t();$()||l()},0)})();else for(;c<=p&&Date.now()<=T;){var q=$();if(q)return q}},addToPath:function(n,o,i,r){var t=n.lastComponent;return t&&t.added===o&&t.removed===i?{oldPos:n.oldPos+r,lastComponent:{count:t.count+1,added:o,removed:i,previousComponent:t.previousComponent}}:{oldPos:n.oldPos+r,lastComponent:{count:1,added:o,removed:i,previousComponent:t}}},extractCommon:function(n,o,i,r){for(var t=o.length,u=i.length,s=n.oldPos,f=s-r,v=0;f+1<t&&s+1<u&&this.equals(o[f+1],i[s+1]);)f++,s++,v++;return v&&(n.lastComponent={count:v,previousComponent:n.lastComponent}),n.oldPos=s,f},equals:function(n,o){return this.options.comparator?this.options.comparator(n,o):n===o||this.options.ignoreCase&&n.toLowerCase()===o.toLowerCase()},removeEmpty:function(n){for(var o=[],i=0;i<n.length;i++)n[i]&&o.push(n[i]);return o},castInput:function(n){return n},tokenize:function(n){return n.split("")},join:function(n){return n.join("")}};function N(e,n,o,i,r){for(var t=[],u;n;)t.push(n),u=n.previousComponent,delete n.previousComponent,n=u;t.reverse();for(var s=0,f=t.length,v=0,c=0;s<f;s++){var p=t[s];if(p.removed){if(p.value=e.join(i.slice(c,c+p.count)),c+=p.count,s&&t[s-1].added){var T=t[s-1];t[s-1]=t[s],t[s]=T}}else{if(!p.added&&r){var y=o.slice(v,v+p.count);y=y.map(function(m,x){var C=i[c+x];return C.length>m.length?C:m}),p.value=e.join(y)}else p.value=e.join(o.slice(v,v+p.count));v+=p.count,p.added||(c+=p.count)}}var a=t[f-1];return f>1&&typeof a.value=="string"&&(a.added||a.removed)&&e.equals("",a.value)&&(t[f-2].value+=a.value,t.pop()),t}var R=new d;function G(e,n,o){return R.diff(e,n,o)}var F=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,W=/\S/,A=new d;A.equals=function(e,n){return this.options.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e===n||this.options.ignoreWhitespace&&!W.test(e)&&!W.test(n)};A.tokenize=function(e){for(var n=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),o=0;o<n.length-1;o++)!n[o+1]&&n[o+2]&&F.test(n[o])&&F.test(n[o+2])&&(n[o]+=n[o+2],n.splice(o+1,2),o--);return n};var J=new d;J.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var n=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var i=0;i<o.length;i++){var r=o[i];i%2&&!this.options.newlineIsToken?n[n.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),n.push(r))}return n};var V=new d;V.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var Z=new d;Z.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function z(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(n){return typeof n}:z=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},z(e)}var B=Object.prototype.toString,D=new d;D.useLongestToken=!0;D.tokenize=J.tokenize;D.castInput=function(e){var n=this.options,o=n.undefinedReplacement,i=n.stringifyReplacer,r=i===void 0?function(t,u){return typeof u>"u"?o:u}:i;return typeof e=="string"?e:JSON.stringify(g(e,null,null,r),r,"  ")};D.equals=function(e,n){return d.prototype.equals.call(D,e.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"))};function g(e,n,o,i,r){n=n||[],o=o||[],i&&(e=i(r,e));var t;for(t=0;t<n.length;t+=1)if(n[t]===e)return o[t];var u;if(B.call(e)==="[object Array]"){for(n.push(e),u=new Array(e.length),o.push(u),t=0;t<e.length;t+=1)u[t]=g(e[t],n,o,i,r);return n.pop(),o.pop(),u}if(e&&e.toJSON&&(e=e.toJSON()),z(e)==="object"&&e!==null){n.push(e),u={},o.push(u);var s=[],f;for(f in e)e.hasOwnProperty(f)&&s.push(f);for(s.sort(),t=0;t<s.length;t+=1)f=s[t],u[f]=g(e[f],n,o,i,f);n.pop(),o.pop()}else u=e;return u}var I=new d;I.tokenize=function(e){return e.slice()};I.join=I.removeEmpty=function(e){return e};export{G as d};
